/**
  * SiteWhere IDE Common Library v2.1.0
  * (c) 2019 SiteWhere LLC
  * @license CPAL-1.0
  */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("vue"),require("moment")):"function"==typeof define&&define.amd?define(["exports","vue","moment"],e):e((t=t||self).SiteWhereIdeCommon={},t.Vue,t.moment)}(this,function(t,i,e){"use strict";i=i&&i.hasOwnProperty("default")?i.default:i,e=e&&e.hasOwnProperty("default")?e.default:e;var o,r,n=(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var o,c=(o=i)&&"object"==typeof o&&"default"in o?o.default:o,s="undefined"!=typeof Reflect&&Reflect.defineMetadata&&Reflect.getOwnMetadataKeys;function u(o,r,n){(n?Reflect.getOwnMetadataKeys(r,n):Reflect.getOwnMetadataKeys(r)).forEach(function(t){var e=n?Reflect.getOwnMetadata(t,r,n):Reflect.getOwnMetadata(t,r);n?Reflect.defineMetadata(t,e,o,n):Reflect.defineMetadata(t,e,o)})}var p={__proto__:[]}instanceof Array;var l=["data","beforeCreate","created","beforeMount","mounted","beforeDestroy","destroyed","beforeUpdate","updated","activated","deactivated","render","errorCaptured","serverPrefetch"];function r(t,r){void 0===r&&(r={}),r.name=r.name||t._componentTag||t.name;var n=t.prototype;Object.getOwnPropertyNames(n).forEach(function(e){if("constructor"!==e)if(-1<l.indexOf(e))r[e]=n[e];else{var o=Object.getOwnPropertyDescriptor(n,e);void 0!==o.value?"function"==typeof o.value?(r.methods||(r.methods={}))[e]=o.value:(r.mixins||(r.mixins=[])).push({data:function(){var t;return(t={})[e]=o.value,t}}):(o.get||o.set)&&((r.computed||(r.computed={}))[e]={get:o.get,set:o.set})}}),(r.mixins||(r.mixins=[])).push({data:function(){return function(r,t){var e=t.prototype._init;t.prototype._init=function(){var t=this,e=Object.getOwnPropertyNames(r);if(r.$options.props)for(var o in r.$options.props)r.hasOwnProperty(o)||e.push(o);e.forEach(function(e){"_"!==e.charAt(0)&&Object.defineProperty(t,e,{get:function(){return r[e]},set:function(t){r[e]=t},configurable:!0})})};var o=new t;t.prototype._init=e;var n={};return Object.keys(o).forEach(function(t){void 0!==o[t]&&(n[t]=o[t])}),n}(this,t)}});var e=t.__decorators__;e&&(e.forEach(function(t){return t(r)}),delete t.__decorators__);var o=Object.getPrototypeOf(t.prototype),i=o instanceof c?o.constructor:c,a=i.extend(r);return function(n,i,a){Object.getOwnPropertyNames(i).forEach(function(t){if(!f[t]){var e=Object.getOwnPropertyDescriptor(n,t);if(!e||e.configurable){var o=Object.getOwnPropertyDescriptor(i,t);if(!p){if("cid"===t)return;var r=Object.getOwnPropertyDescriptor(a,t);if(!function(t){var e=typeof t;return null==t||"object"!=e&&"function"!=e}(o.value)&&r&&r.value===o.value)return}Object.defineProperty(n,t,o)}}})}(a,t,i),s&&function(e,o){u(e,o),Object.getOwnPropertyNames(o.prototype).forEach(function(t){u(e.prototype,o.prototype,t)}),Object.getOwnPropertyNames(o).forEach(function(t){u(e,o,t)})}(a,t),a}var f={prototype:!0,arguments:!0,callee:!0,caller:!0};function n(e){return"function"==typeof e?r(e):function(t){return r(t,e)}}n.registerHooks=function(t){l.push.apply(l,t)},e.default=n,e.createDecorator=function(n){return function(t,e,o){var r="function"==typeof t?t:t.constructor;r.__decorators__||(r.__decorators__=[]),"number"!=typeof o&&(o=void 0),r.__decorators__.push(function(t){return n(t,e,o)})}},e.mixins=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return c.extend({mixins:t})}}(o={exports:{}},o.exports),o.exports),a=(r=n)&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r,c=n.createDecorator,s=n.mixins;var u="undefined"!=typeof Reflect&&void 0!==Reflect.getMetadata;function p(t,e,o){u&&(Array.isArray(t)||"function"==typeof t||void 0!==t.type||(t.type=Reflect.getMetadata("design:type",e,o)))}function l(o){return void 0===o&&(o={}),function(t,e){p(o,t,e),c(function(t,e){(t.props||(t.props={}))[e]=o})(t,e)}}var f=/\B([A-Z])/g;var d,h=(d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),y=function(t,e,o,r){var n,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,r);else for(var c=t.length-1;0<=c;c--)(n=t[c])&&(a=(i<3?n(a):3<i?n(e,o,a):n(e,o))||a);return 3<i&&a&&Object.defineProperty(e,o,a),a},v=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},g=function(i,a,c,s){return new(c||(c=Promise))(function(t,e){function o(t){try{n(s.next(t))}catch(t){e(t)}}function r(t){try{n(s.throw(t))}catch(t){e(t)}}function n(e){e.done?t(e.value):new c(function(t){t(e.value)}).then(o,r)}n((s=s.apply(i,a||[])).next())})},m=function(o,r){var n,i,a,t,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,i&&(a=2&e[0]?i.return:e[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,e[1])).done)return a;switch(i=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return c.label++,{value:e[1],done:!1};case 5:c.label++,i=e[1],e=[0];continue;case 7:e=c.ops.pop(),c.trys.pop();continue;default:if(!(a=0<(a=c.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){c=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){c.label=e[1];break}if(6===e[0]&&c.label<a[1]){c.label=a[1],a=e;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(e);break}a[2]&&c.ops.pop(),c.trys.pop();continue}e=r.call(o,c)}catch(t){e=[6,t],i=0}finally{n=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.results=null,t.paging=null,t.matches=[],t.loaded=!1,t}return h(t,e),t.prototype.onPagingUpdated=function(t){this.paging=t,this.refresh()},t.prototype.buildSearchCriteria=function(){throw new Error("Implement buildSearchCriteria()")},t.prototype.buildResponseFormat=function(){throw new Error("Implement buildResponseFormat()")},t.prototype.performSearch=function(t,e){throw new Error("Implement performSearch()")},t.prototype.refresh=function(){return g(this,void 0,void 0,function(){var e,o,r;return m(this,function(t){switch(t.label){case 0:e=this.buildSearchCriteria(),o=this.buildResponseFormat(),this.paging&&(e.pageNumber=this.paging.pageNumber,e.pageSize=this.paging.pageSize),t.label=1;case 1:return t.trys.push([1,3,,4]),this.loaded=!1,[4,this.performSearch(e,o)];case 2:return r=t.sent(),this.results=r.data,this.matches=r.data.results,[3,4];case 3:return x(t.sent()),[3,4];case 4:return this.loaded=!0,[2]}})})},t=y([a],t)}(i),w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.token=null,t.record=null,t.loaded=!1,t}return h(t,e),t.prototype.getTokenParameter=function(){return"token"},t.prototype.created=function(){this.display(this.$route.params[this.getTokenParameter()])},t.prototype.beforeRouteUpdate=function(t,e,o){console.log("Route updated",t),this.display(t.params.token),o()},t.prototype.display=function(t){this.token=t,this.refresh()},t.prototype.loadRecord=function(t){throw new Error("Implement loadRecord()")},t.prototype.refresh=function(){return g(this,void 0,void 0,function(){var e;return m(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),this.loaded=!1,[4,this.loadRecord(this.token)];case 1:return e=t.sent(),this.record=e.data,this.afterRecordLoaded(this.record),[3,3];case 2:return x(t.sent()),[3,3];case 3:return this.loaded=!0,[2]}})})},t.prototype.afterRecordLoaded=function(t){console.log("Loaded record",t)},t=y([a],t)}(i),D=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e.prototype.formatDate=function(t){return P(t)},y([l(),v("design:type",Object)],e.prototype,"record",void 0),e=y([a],e)}(i),O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dialogVisible=!1,t.error=null,t}return h(t,e),t.prototype.reset=function(){throw new Error("Reset not implemented in dialog.")},t.prototype.load=function(t){throw new Error("Load not implemented in dialog.")},t.prototype.openDialog=function(){this.dialogVisible=!0},t.prototype.closeDialog=function(){this.dialogVisible=!1},t.prototype.showError=function(t){this.error=t},t.prototype.onCreateClicked=function(t){},t.prototype.onCancelClicked=function(t){this.closeDialog()},y([l(),v("design:type",String)],t.prototype,"title",void 0),y([l(),v("design:type",Number)],t.prototype,"width",void 0),y([l(),v("design:type",String)],t.prototype,"createLabel",void 0),y([l(),v("design:type",String)],t.prototype,"cancelLabel",void 0),y([l({default:!0}),v("design:type",Boolean)],t.prototype,"loaded",void 0),t=y([a],t)}(i),_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e.prototype.getDialog=function(){throw new Error("Create dialog must implement getDialog().")},e.prototype.open=function(){this.getDialog().reset(),this.getDialog().openDialog()},e.prototype.loadAndOpen=function(t){this.getDialog().reset(),this.getDialog().load(t),this.getDialog().openDialog()},e.prototype.save=function(t){throw new Error("Create dialog must implement save().")},e.prototype.afterSave=function(t){},e.prototype.isAxiosResponse=function(t){return void 0!==t.data},e.prototype.commit=function(r){return g(this,void 0,void 0,function(){var e,o;return m(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.save(r)];case 1:return e=t.sent(),o=this.isAxiosResponse(e)?e.data:e,this.afterSave(o),this.$emit("created",o),this.getDialog().closeDialog(),[3,3];case 2:return x(t.sent()),[3,3];case 3:return[2]}})})},e}(i),R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.record=null,t.loaded=!1,t}return h(t,e),t.prototype.getDialog=function(){throw new Error("Edit dialog must implement getDialog().")},t.prototype.prepareLoad=function(t){throw new Error("Edit dialog must implement load().")},t.prototype.isAxiosResponse=function(t){return void 0!==t.data},t.prototype.open=function(o){return g(this,void 0,void 0,function(){var e;return m(this,function(t){switch(t.label){case 0:this.getDialog().openDialog(),this.getDialog().reset(),this.loaded=!1,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.prepareLoad(o)];case 2:return e=t.sent(),this.record=this.isAxiosResponse(e)?e.data:e,this.getDialog().load(this.record),[3,4];case 3:return x(t.sent()),[3,4];case 4:return this.loaded=!0,[2]}})})},t.prototype.prepareSave=function(t,e){throw new Error("Edit dialog must implement save().")},t.prototype.save=function(r){return g(this,void 0,void 0,function(){var e,o;return m(this,function(t){switch(t.label){case 0:if(!this.record)throw new Error("Unable to update. Record is null.");t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.prepareSave(this.record,r)];case 2:return e=t.sent(),o=this.isAxiosResponse(e)?e.data:e,this.afterSave(o),this.$emit("updated",o),this.getDialog().closeDialog(),[3,4];case 3:return x(t.sent()),[3,4];case 4:return[2]}})})},t.prototype.afterSave=function(t){},t}(i),j=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.record=null,t.visible=!1,t.error=null,t}return h(t,e),t.prototype.prepareLoad=function(t){throw new Error("Load not implemented in dialog.")},t.prototype.isAxiosResponse=function(t){return void 0!==t.data},t.prototype.afterLoad=function(t){},t.prototype.open=function(o){return g(this,void 0,void 0,function(){var e;return m(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.prepareLoad(o)];case 1:return e=t.sent(),this.record=this.isAxiosResponse(e)?e.data:e,this.visible=!0,this.afterLoad(this.record),[3,3];case 2:return x(t.sent()),[3,3];case 3:return[2]}})})},t.prototype.prepareDelete=function(t){throw new Error("Delete not implemented in dialog.")},t.prototype.delete=function(){return g(this,void 0,void 0,function(){var e;return m(this,function(t){switch(t.label){case 0:if(!this.record)throw new Error("Unable to delete. Record is null.");t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.prepareDelete(this.record)];case 2:return e=t.sent(),this.record=this.isAxiosResponse(e)?e.data:e,this.$emit("deleted",this.record),this.closeDialog(),[3,4];case 3:return x(t.sent()),[3,4];case 4:return[2]}})})},t.prototype.cancel=function(){this.closeDialog()},t.prototype.closeDialog=function(){this.visible=!1},t.prototype.showError=function(t){this.error=t},y([l(),v("design:type",String)],t.prototype,"title",void 0),y([l(),v("design:type",Number)],t.prototype,"width",void 0),t=y([a],t)}(i),E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e.prototype.created=function(){this.reset()},e.prototype.reset=function(){throw new Error("Reset not implemented in dialog section.")},e.prototype.validate=function(){return!0},e.prototype.load=function(t){},e.prototype.save=function(){return{}},e=y([a],e)}(i);function x(t){console.log(t)}function P(t){return t?e(t).format("YYYY-MM-DD H:mm:ss"):"N/A"}t.Vue=i,t.Component=a,t.CreateDialogComponent=_,t.DeleteDialogComponent=j,t.DetailComponent=w,t.DialogComponent=O,t.DialogSection=E,t.EditDialogComponent=R,t.Emit=function(c){return function(t,i,e){i=function(t){return t.replace(f,"-$1").toLowerCase()}(i);var a=e.value;e.value=function(){for(var e=this,o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];function r(t){void 0!==t&&o.unshift(t),e.$emit.apply(e,[c||i].concat(o))}var n=a.apply(this,o);!function(t){return t instanceof Promise||t&&"function"==typeof t.then}(n)?r(n):n.then(function(t){r(t)})}}},t.HeaderComponent=D,t.Inject=function(o){return c(function(t,e){void 0===t.inject&&(t.inject={}),Array.isArray(t.inject)||(t.inject[e]=o||e)})},t.ListComponent=b,t.Mixins=s,t.Model=function(o,r){return void 0===r&&(r={}),function(t,e){p(r,t,e),c(function(t,e){(t.props||(t.props={}))[e]=r,t.model={prop:e,event:o||e}})(t,e)}},t.Prop=l,t.Provide=function(n){return c(function(t,e){var o=t.provide;if("function"!=typeof o||!o.managed){var r=t.provide;(o=t.provide=function(){var t=Object.create(("function"==typeof r?r.call(this):r)||null);for(var e in o.managed)t[o.managed[e]]=this[e];return t}).managed={}}o.managed[e]=n||e})},t.Watch=function(r,t){void 0===t&&(t={});var e=t.deep,n=void 0!==e&&e,o=t.immediate,i=void 0!==o&&o;return c(function(t,e){"object"!=typeof t.watch&&(t.watch=Object.create(null));var o=t.watch;"object"!=typeof o[r]||Array.isArray(o[r])?void 0===o[r]&&(o[r]=[]):o[r]=[o[r]],o[r].push({handler:e,deep:n,immediate:i})})},t.formatDate=P,t.handleError=x,Object.defineProperty(t,"__esModule",{value:!0})});