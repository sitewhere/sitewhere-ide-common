/**
  * SiteWhere IDE Common Library v3.0.0-alpha.1
  * (c) 2019 SiteWhere LLC
  * @license CPAL-1.0
  */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("vue"),require("moment")):"function"==typeof define&&define.amd?define(["exports","vue","moment"],e):e((t=t||self).SiteWhereIdeCommon={},t.Vue,t.moment)}(this,function(t,d,e){"use strict";function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){return function(t){if(Array.isArray(t)){for(var e=0,o=new Array(t.length);e<t.length;e++)o[e]=t[e];return o}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function y(o,r,n){(n?Reflect.getOwnMetadataKeys(r,n):Reflect.getOwnMetadataKeys(r)).forEach(function(t){var e=n?Reflect.getOwnMetadata(t,r,n):Reflect.getOwnMetadata(t,r);n?Reflect.defineMetadata(t,e,o,n):Reflect.defineMetadata(t,e,o)})}d=d&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d,e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;var v={__proto__:[]}instanceof Array;function a(n){return function(t,e,o){var r="function"==typeof t?t:t.constructor;r.__decorators__||(r.__decorators__=[]),"number"!=typeof o&&(o=void 0),r.__decorators__.push(function(t){return n(t,e,o)})}}var g=["data","beforeCreate","created","beforeMount","mounted","beforeDestroy","destroyed","beforeUpdate","updated","activated","deactivated","render","errorCaptured","serverPrefetch"];function r(t,e){var o=1<arguments.length&&void 0!==e?e:{};o.name=o.name||t._componentTag||t.name;var i=t.prototype;Object.getOwnPropertyNames(i).forEach(function(r){if("constructor"!==r)if(-1<g.indexOf(r))o[r]=i[r];else{var n=Object.getOwnPropertyDescriptor(i,r);void 0!==n.value?"function"==typeof n.value?(o.methods||(o.methods={}))[r]=n.value:(o.mixins||(o.mixins=[])).push({data:function(){return t={},e=r,o=n.value,e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t;var t,e,o}}):(n.get||n.set)&&((o.computed||(o.computed={}))[r]={get:n.get,set:n.set})}}),(o.mixins||(o.mixins=[])).push({data:function(){return function(r,t){var e=t.prototype._init;t.prototype._init=function(){var t=this,e=Object.getOwnPropertyNames(r);if(r.$options.props)for(var o in r.$options.props)r.hasOwnProperty(o)||e.push(o);e.forEach(function(e){"_"!==e.charAt(0)&&Object.defineProperty(t,e,{get:function(){return r[e]},set:function(t){r[e]=t},configurable:!0})})};var o=new t;t.prototype._init=e;var n={};return Object.keys(o).forEach(function(t){void 0!==o[t]&&(n[t]=o[t])}),n}(this,t)}});var r=t.__decorators__;r&&(r.forEach(function(t){return t(o)}),delete t.__decorators__);var a,c,s,n,u,p=Object.getPrototypeOf(t.prototype),l=p instanceof d?p.constructor:d,f=l.extend(o);return a=f,c=t,s=l,Object.getOwnPropertyNames(c).forEach(function(t){if(!m[t]){var e=Object.getOwnPropertyDescriptor(a,t);if(!e||e.configurable){var o,r,n=Object.getOwnPropertyDescriptor(c,t);if(!v){if("cid"===t)return;var i=Object.getOwnPropertyDescriptor(s,t);if(o=n.value,r=h(o),null!=o&&("object"===r||"function"===r)&&i&&i.value===n.value)return}Object.defineProperty(a,t,n)}}}),"undefined"!=typeof Reflect&&Reflect.defineMetadata&&Reflect.getOwnMetadataKeys&&(y(n=f,u=t),Object.getOwnPropertyNames(u.prototype).forEach(function(t){y(n.prototype,u.prototype,t)}),Object.getOwnPropertyNames(u).forEach(function(t){y(n,u,t)})),f}var m={prototype:!0,arguments:!0,callee:!0,caller:!0};function n(e){return"function"==typeof e?r(e):function(t){return r(t,e)}}n.registerHooks=function(t){g.push.apply(g,o(t))};var c="__reactiveInject__";function i(i){var a=function(){var e=this,o="function"==typeof i?i.call(this):i;for(var t in(o=Object.create(o||null))[c]=this[c]||{},a.managed)o[a.managed[t]]=this[t];function r(t){o[a.managedReactive[t]]=n[t],Object.defineProperty(o[c],a.managedReactive[t],{enumerable:!0,get:function(){return e[t]}})}var n=this;for(var t in a.managedReactive)r(t);return o};return a.managed={},a.managedReactive={},a}var s="undefined"!=typeof Reflect&&void 0!==Reflect.getMetadata;function u(t,e,o){s&&(Array.isArray(t)||"function"==typeof t||void 0!==t.type||(t.type=Reflect.getMetadata("design:type",e,o)))}function p(o){return void 0===o&&(o={}),function(t,e){u(o,t,e),a(function(t,e){(t.props||(t.props={}))[e]=o})(t,e)}}var l=/\B([A-Z])/g;var f,b,w=(f=function(t,e){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}f(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),O=function(t,e,o,r){var n,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,r);else for(var c=t.length-1;0<=c;c--)(n=t[c])&&(a=(i<3?n(a):3<i?n(e,o,a):n(e,o))||a);return 3<i&&a&&Object.defineProperty(e,o,a),a},D=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},R=function(t,a,c,s){return new(c=c||Promise)(function(o,e){function r(t){try{i(s.next(t))}catch(t){e(t)}}function n(t){try{i(s.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?o(t.value):((e=t.value)instanceof c?e:new c(function(t){t(e)})).then(r,n)}i((s=s.apply(t,a||[])).next())})},_=function(o,r){var n,i,a,t,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,i&&(a=2&e[0]?i.return:e[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,e[1])).done)return a;switch(i=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return c.label++,{value:e[1],done:!1};case 5:c.label++,i=e[1],e=[0];continue;case 7:e=c.ops.pop(),c.trys.pop();continue;default:if(!(a=0<(a=c.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){c=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){c.label=e[1];break}if(6===e[0]&&c.label<a[1]){c.label=a[1],a=e;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(e);break}a[2]&&c.ops.pop(),c.trys.pop();continue}e=r.call(o,c)}catch(t){e=[6,t],i=0}finally{n=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},j=(w(E,b=d),E.prototype.onPagingUpdated=function(t){this.paging=t,this.refresh()},E.prototype.buildSearchCriteria=function(){throw new Error("Implement buildSearchCriteria()")},E.prototype.buildResponseFormat=function(){throw new Error("Implement buildResponseFormat()")},E.prototype.performSearch=function(t,e){throw new Error("Implement performSearch()")},E.prototype.refresh=function(){return R(this,void 0,void 0,function(){var e,o,r;return _(this,function(t){switch(t.label){case 0:e=this.buildSearchCriteria(),o=this.buildResponseFormat(),this.paging&&(e.pageNumber=this.paging.pageNumber,e.pageSize=this.paging.pageSize),t.label=1;case 1:return t.trys.push([1,3,,4]),this.loaded=!1,[4,this.performSearch(e,o)];case 2:return r=t.sent(),this.results=r.data,this.matches=r.data.results,[3,4];case 3:return W(t.sent()),[3,4];case 4:return this.loaded=!0,[2]}})})},E=O([n],E));function E(){var t=null!==b&&b.apply(this,arguments)||this;return t.results=null,t.paging=null,t.matches=[],t.loaded=!1,t}var P,S=(w(A,P=d),A.prototype.getTokenParameter=function(){return"token"},A.prototype.created=function(){this.display(this.$route.params[this.getTokenParameter()])},A.prototype.beforeRouteUpdate=function(t,e,o){console.log("Route updated",t),this.display(t.params.token),o()},A.prototype.display=function(t){this.token=t,this.refresh()},A.prototype.loadRecord=function(t){throw new Error("Implement loadRecord()")},A.prototype.refresh=function(){return R(this,void 0,void 0,function(){var e;return _(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),this.loaded=!1,[4,this.loadRecord(this.token)];case 1:return e=t.sent(),this.record=e.data,this.afterRecordLoaded(this.record),[3,3];case 2:return W(t.sent()),[3,3];case 3:return this.loaded=!0,[2]}})})},A.prototype.afterRecordLoaded=function(t){console.log("Loaded record",t)},A=O([n],A));function A(){var t=null!==P&&P.apply(this,arguments)||this;return t.token=null,t.record=null,t.loaded=!1,t}var x,C=(w(M,x=d),M.prototype.formatDate=function(t){return G(t)},O([p(),D("design:type",Object)],M.prototype,"record",void 0),M=O([n],M));function M(){return null!==x&&x.apply(this,arguments)||this}var k,L=(w(N,k=d),N.prototype.reset=function(){throw new Error("Reset not implemented in dialog.")},N.prototype.load=function(t){throw new Error("Load not implemented in dialog.")},N.prototype.openDialog=function(){this.dialogVisible=!0},N.prototype.closeDialog=function(){this.dialogVisible=!1},N.prototype.showError=function(t){this.error=t},N.prototype.onCreateClicked=function(t){},N.prototype.onCancelClicked=function(t){this.closeDialog()},O([p(),D("design:type",String)],N.prototype,"title",void 0),O([p(),D("design:type",Number)],N.prototype,"width",void 0),O([p(),D("design:type",String)],N.prototype,"createLabel",void 0),O([p(),D("design:type",String)],N.prototype,"cancelLabel",void 0),O([p({default:!0}),D("design:type",Boolean)],N.prototype,"loaded",void 0),N=O([n],N));function N(){var t=null!==k&&k.apply(this,arguments)||this;return t.dialogVisible=!1,t.error=null,t}var I,$=(w(T,I=d),T.prototype.getDialog=function(){throw new Error("Create dialog must implement getDialog().")},T.prototype.open=function(){this.getDialog().reset(),this.getDialog().openDialog()},T.prototype.loadAndOpen=function(t){this.getDialog().reset(),this.getDialog().load(t),this.getDialog().openDialog()},T.prototype.save=function(t){throw new Error("Create dialog must implement save().")},T.prototype.afterSave=function(t){},T.prototype.isAxiosResponse=function(t){return void 0!==t.data},T.prototype.commit=function(r){return R(this,void 0,void 0,function(){var e,o;return _(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.save(r)];case 1:return e=t.sent(),o=this.isAxiosResponse(e)?e.data:e,this.afterSave(o),this.$emit("created",o),this.getDialog().closeDialog(),[3,3];case 2:return W(t.sent()),[3,3];case 3:return[2]}})})},T);function T(){return null!==I&&I.apply(this,arguments)||this}var U,V=(w(Y,U=d),Y.prototype.getDialog=function(){throw new Error("Edit dialog must implement getDialog().")},Y.prototype.prepareLoad=function(t){throw new Error("Edit dialog must implement load().")},Y.prototype.isAxiosResponse=function(t){return void 0!==t.data},Y.prototype.open=function(o){return R(this,void 0,void 0,function(){var e;return _(this,function(t){switch(t.label){case 0:this.getDialog().openDialog(),this.getDialog().reset(),this.loaded=!1,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.prepareLoad(o)];case 2:return e=t.sent(),this.record=this.isAxiosResponse(e)?e.data:e,this.getDialog().load(this.record),[3,4];case 3:return W(t.sent()),[3,4];case 4:return this.loaded=!0,[2]}})})},Y.prototype.prepareSave=function(t,e){throw new Error("Edit dialog must implement save().")},Y.prototype.save=function(r){return R(this,void 0,void 0,function(){var e,o;return _(this,function(t){switch(t.label){case 0:if(!this.record)throw new Error("Unable to update. Record is null.");t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.prepareSave(this.record,r)];case 2:return e=t.sent(),o=this.isAxiosResponse(e)?e.data:e,this.afterSave(o),this.$emit("updated",o),this.getDialog().closeDialog(),[3,4];case 3:return W(t.sent()),[3,4];case 4:return[2]}})})},Y.prototype.afterSave=function(t){},Y);function Y(){var t=null!==U&&U.apply(this,arguments)||this;return t.record=null,t.loaded=!1,t}var F,H=(w(K,F=d),K.prototype.prepareLoad=function(t){throw new Error("Load not implemented in dialog.")},K.prototype.isAxiosResponse=function(t){return void 0!==t.data},K.prototype.afterLoad=function(t){},K.prototype.open=function(o){return R(this,void 0,void 0,function(){var e;return _(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.prepareLoad(o)];case 1:return e=t.sent(),this.record=this.isAxiosResponse(e)?e.data:e,this.visible=!0,this.afterLoad(this.record),[3,3];case 2:return W(t.sent()),[3,3];case 3:return[2]}})})},K.prototype.prepareDelete=function(t){throw new Error("Delete not implemented in dialog.")},K.prototype.delete=function(){return R(this,void 0,void 0,function(){var e;return _(this,function(t){switch(t.label){case 0:if(!this.record)throw new Error("Unable to delete. Record is null.");t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.prepareDelete(this.record)];case 2:return e=t.sent(),this.record=this.isAxiosResponse(e)?e.data:e,this.$emit("deleted",this.record),this.closeDialog(),[3,4];case 3:return W(t.sent()),[3,4];case 4:return[2]}})})},K.prototype.cancel=function(){this.closeDialog()},K.prototype.closeDialog=function(){this.visible=!1},K.prototype.showError=function(t){this.error=t},O([p(),D("design:type",String)],K.prototype,"title",void 0),O([p(),D("design:type",Number)],K.prototype,"width",void 0),K=O([n],K));function K(){var t=null!==F&&F.apply(this,arguments)||this;return t.record=null,t.visible=!1,t.error=null,t}var q,z=(w(B,q=d),B.prototype.created=function(){this.reset()},B.prototype.reset=function(){throw new Error("Reset not implemented in dialog section.")},B.prototype.validate=function(){return!0},B.prototype.load=function(t){},B.prototype.save=function(){return{}},B=O([n],B));function B(){return null!==q&&q.apply(this,arguments)||this}function W(t){console.log(t)}function G(t){return t?e(t).format("YYYY-MM-DD H:mm:ss"):"N/A"}t.Vue=d,t.Component=n,t.CreateDialogComponent=$,t.DeleteDialogComponent=H,t.DetailComponent=S,t.DialogComponent=L,t.DialogSection=z,t.EditDialogComponent=V,t.Emit=function(s){return function(t,a,e){a=a.replace(l,"-$1").toLowerCase();var c=e.value;e.value=function(){for(var e=this,o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];function r(t){void 0!==t&&o.unshift(t),e.$emit.apply(e,[s||a].concat(o))}var n,i=c.apply(this,o);return(n=i)instanceof Promise||n&&"function"==typeof n.then?i.then(function(t){r(t)}):r(i),i}}},t.HeaderComponent=C,t.Inject=function(o){return a(function(t,e){void 0===t.inject&&(t.inject={}),Array.isArray(t.inject)||(t.inject[e]=o||e)})},t.ListComponent=j,t.Mixins=function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return d.extend({mixins:e})},t.Model=function(o,r){return void 0===r&&(r={}),function(t,e){u(r,t,e),a(function(t,e){(t.props||(t.props={}))[e]=r,t.model={prop:e,event:o||e}})(t,e)}},t.Prop=p,t.Provide=function(n){return a(function(t,e){var o,r=t.provide;"function"==typeof(o=r)&&(o.managed||o.managedReactive)||(r=t.provide=i(r)),r.managed[e]=n||e})},t.Watch=function(r,t){void 0===t&&(t={});var e=t.deep,n=void 0!==e&&e,o=t.immediate,i=void 0!==o&&o;return a(function(t,e){"object"!=typeof t.watch&&(t.watch=Object.create(null));var o=t.watch;"object"!=typeof o[r]||Array.isArray(o[r])?void 0===o[r]&&(o[r]=[]):o[r]=[o[r]],o[r].push({handler:e,deep:n,immediate:i})})},t.formatDate=G,t.handleError=W,Object.defineProperty(t,"__esModule",{value:!0})});