/**
  * SiteWhere IDE Common Library v0.0.18
  * (c) 2019 SiteWhere LLC
  * @license CPAL-1.0
  */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("vue"),require("moment")):"function"==typeof define&&define.amd?define(["exports","vue","moment"],e):e((t=t||self).SiteWhereIdeCommon={},t.Vue,t.moment)}(this,function(t,i,e){"use strict";i=i&&i.hasOwnProperty("default")?i.default:i,e=e&&e.hasOwnProperty("default")?e.default:e;var r,o,n=(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r,c=(r=i)&&"object"==typeof r&&"default"in r?r.default:r,u="undefined"!=typeof Reflect&&Reflect.defineMetadata&&Reflect.getOwnMetadataKeys;function s(r,o,n){(n?Reflect.getOwnMetadataKeys(o,n):Reflect.getOwnMetadataKeys(o)).forEach(function(t){var e=n?Reflect.getOwnMetadata(t,o,n):Reflect.getOwnMetadata(t,o);n?Reflect.defineMetadata(t,e,r,n):Reflect.defineMetadata(t,e,r)})}var p={__proto__:[]}instanceof Array;var l=["data","beforeCreate","created","beforeMount","mounted","beforeDestroy","destroyed","beforeUpdate","updated","activated","deactivated","render","errorCaptured","serverPrefetch"];function o(t,o){void 0===o&&(o={}),o.name=o.name||t._componentTag||t.name;var n=t.prototype;Object.getOwnPropertyNames(n).forEach(function(e){if("constructor"!==e)if(-1<l.indexOf(e))o[e]=n[e];else{var r=Object.getOwnPropertyDescriptor(n,e);void 0!==r.value?"function"==typeof r.value?(o.methods||(o.methods={}))[e]=r.value:(o.mixins||(o.mixins=[])).push({data:function(){var t;return(t={})[e]=r.value,t}}):(r.get||r.set)&&((o.computed||(o.computed={}))[e]={get:r.get,set:r.set})}}),(o.mixins||(o.mixins=[])).push({data:function(){return function(o,t){var e=t.prototype._init;t.prototype._init=function(){var t=this,e=Object.getOwnPropertyNames(o);if(o.$options.props)for(var r in o.$options.props)o.hasOwnProperty(r)||e.push(r);e.forEach(function(e){"_"!==e.charAt(0)&&Object.defineProperty(t,e,{get:function(){return o[e]},set:function(t){o[e]=t},configurable:!0})})};var r=new t;t.prototype._init=e;var n={};return Object.keys(r).forEach(function(t){void 0!==r[t]&&(n[t]=r[t])}),n}(this,t)}});var e=t.__decorators__;e&&(e.forEach(function(t){return t(o)}),delete t.__decorators__);var r=Object.getPrototypeOf(t.prototype),i=r instanceof c?r.constructor:c,a=i.extend(o);return function(n,i,a){Object.getOwnPropertyNames(i).forEach(function(t){if(!f[t]){var e=Object.getOwnPropertyDescriptor(n,t);if(!e||e.configurable){var r=Object.getOwnPropertyDescriptor(i,t);if(!p){if("cid"===t)return;var o=Object.getOwnPropertyDescriptor(a,t);if(!function(t){var e=typeof t;return null==t||"object"!=e&&"function"!=e}(r.value)&&o&&o.value===r.value)return}Object.defineProperty(n,t,r)}}})}(a,t,i),u&&function(e,r){s(e,r),Object.getOwnPropertyNames(r.prototype).forEach(function(t){s(e.prototype,r.prototype,t)}),Object.getOwnPropertyNames(r).forEach(function(t){s(e,r,t)})}(a,t),a}var f={prototype:!0,arguments:!0,callee:!0,caller:!0};function n(e){return"function"==typeof e?o(e):function(t){return o(t,e)}}n.registerHooks=function(t){l.push.apply(l,t)},e.default=n,e.createDecorator=function(n){return function(t,e,r){var o="function"==typeof t?t:t.constructor;o.__decorators__||(o.__decorators__=[]),"number"!=typeof r&&(r=void 0),o.__decorators__.push(function(t){return n(t,e,r)})}},e.mixins=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return c.extend({mixins:t})}}(r={exports:{}},r.exports),r.exports),a=(o=n)&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o,c=n.createDecorator,u=n.mixins;var s="undefined"!=typeof Reflect&&void 0!==Reflect.getMetadata;function p(t,e,r){s&&(Array.isArray(t)||"function"==typeof t||void 0!==t.type||(t.type=Reflect.getMetadata("design:type",e,r)))}function l(r){return void 0===r&&(r={}),function(t,e){p(r,t,e),c(function(t,e){(t.props||(t.props={}))[e]=r})(t,e)}}var f=/\B([A-Z])/g;var d,h=(d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),y=function(t,e,r,o){var n,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,o);else for(var c=t.length-1;0<=c;c--)(n=t[c])&&(a=(i<3?n(a):3<i?n(e,r,a):n(e,r))||a);return 3<i&&a&&Object.defineProperty(e,r,a),a},v=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},g=function(i,a,c,u){return new(c||(c=Promise))(function(t,e){function r(t){try{n(u.next(t))}catch(t){e(t)}}function o(t){try{n(u.throw(t))}catch(t){e(t)}}function n(e){e.done?t(e.value):new c(function(t){t(e.value)}).then(r,o)}n((u=u.apply(i,a||[])).next())})},m=function(r,o){var n,i,a,t,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,i&&(a=2&e[0]?i.return:e[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,e[1])).done)return a;switch(i=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return c.label++,{value:e[1],done:!1};case 5:c.label++,i=e[1],e=[0];continue;case 7:e=c.ops.pop(),c.trys.pop();continue;default:if(!(a=0<(a=c.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){c=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){c.label=e[1];break}if(6===e[0]&&c.label<a[1]){c.label=a[1],a=e;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(e);break}a[2]&&c.ops.pop(),c.trys.pop();continue}e=o.call(r,c)}catch(t){e=[6,t],i=0}finally{n=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.results=null,t.paging=null,t.matches=[],t.loaded=!1,t}return h(t,e),t.prototype.onPagingUpdated=function(t){this.paging=t,this.refresh()},t.prototype.buildSearchCriteria=function(){throw new Error("Implement buildSearchCriteria()")},t.prototype.buildResponseFormat=function(){throw new Error("Implement buildResponseFormat()")},t.prototype.performSearch=function(t,e){throw new Error("Implement performSearch()")},t.prototype.refresh=function(){return g(this,void 0,void 0,function(){var e,r,o;return m(this,function(t){switch(t.label){case 0:e=this.buildSearchCriteria(),r=this.buildResponseFormat(),this.paging&&(e.pageNumber=this.paging.pageNumber,e.pageSize=this.paging.pageSize),t.label=1;case 1:return t.trys.push([1,3,,4]),this.loaded=!1,[4,this.performSearch(e,r)];case 2:return o=t.sent(),this.results=o.data,this.matches=o.data.results,[3,4];case 3:return P(t.sent()),[3,4];case 4:return this.loaded=!0,[2]}})})},t=y([a],t)}(i),w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.token=null,t.record=null,t.loaded=!1,t}return h(t,e),t.prototype.getTokenParameter=function(){return"token"},t.prototype.created=function(){this.display(this.$route.params[this.getTokenParameter()])},t.prototype.beforeRouteUpdate=function(t,e,r){console.log("Route updated",t),this.display(t.params.token),r()},t.prototype.display=function(t){this.token=t,this.refresh()},t.prototype.loadRecord=function(t){throw new Error("Implement loadRecord()")},t.prototype.refresh=function(){return g(this,void 0,void 0,function(){var e;return m(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),this.loaded=!1,[4,this.loadRecord(this.token)];case 1:return e=t.sent(),this.record=e.data,this.afterRecordLoaded(this.record),[3,3];case 2:return P(t.sent()),[3,3];case 3:return this.loaded=!0,[2]}})})},t.prototype.afterRecordLoaded=function(t){console.log("Loaded record",t)},t=y([a],t)}(i),O=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e.prototype.formatDate=function(t){return x(t)},y([l(),v("design:type",Object)],e.prototype,"record",void 0),e=y([a],e)}(i),D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dialogVisible=!1,t.error=null,t}return h(t,e),t.prototype.reset=function(){throw new Error("Reset not implemented in dialog.")},t.prototype.load=function(t){throw new Error("Load not implemented in dialog.")},t.prototype.openDialog=function(){this.dialogVisible=!0},t.prototype.closeDialog=function(){this.dialogVisible=!1},t.prototype.showError=function(t){this.error=t},t.prototype.onCreateClicked=function(t){},t.prototype.onCancelClicked=function(t){this.closeDialog()},y([l(),v("design:type",String)],t.prototype,"title",void 0),y([l(),v("design:type",Number)],t.prototype,"width",void 0),y([l(),v("design:type",String)],t.prototype,"createLabel",void 0),y([l(),v("design:type",String)],t.prototype,"cancelLabel",void 0),y([l({default:!0}),v("design:type",Boolean)],t.prototype,"loaded",void 0),t=y([a],t)}(i),_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e.prototype.getDialog=function(){throw new Error("Create dialog must implement getDialog().")},e.prototype.open=function(){this.getDialog().reset(),this.getDialog().openDialog()},e.prototype.save=function(t){throw new Error("Create dialog must implement save().")},e.prototype.afterSave=function(t){},e.prototype.commit=function(o){return g(this,void 0,void 0,function(){var e,r;return m(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.save(o)];case 1:return e=t.sent(),r=e.data,this.afterSave(r),this.$emit("created",r),this.getDialog().closeDialog(),[3,3];case 2:return P(t.sent()),[3,3];case 3:return[2]}})})},e}(i),j=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.record=null,t.loaded=!1,t}return h(t,e),t.prototype.getDialog=function(){throw new Error("Edit dialog must implement getDialog().")},t.prototype.prepareLoad=function(t){throw new Error("Edit dialog must implement load().")},t.prototype.open=function(r){return g(this,void 0,void 0,function(){var e;return m(this,function(t){switch(t.label){case 0:if(!r)throw new Error("Identifier must be passed for edit.");this.getDialog().openDialog(),this.getDialog().reset(),this.loaded=!1,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.prepareLoad(r)];case 2:return e=t.sent(),this.record=e.data,this.getDialog().load(this.record),[3,4];case 3:return P(t.sent()),[3,4];case 4:return this.loaded=!0,[2]}})})},t.prototype.prepareSave=function(t,e){throw new Error("Edit dialog must implement save().")},t.prototype.save=function(o){return g(this,void 0,void 0,function(){var e,r;return m(this,function(t){switch(t.label){case 0:if(!this.record)throw new Error("Unable to update. Record is null.");t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.prepareSave(this.record,o)];case 2:return e=t.sent(),r=e.data,this.afterSave(r),this.$emit("updated",r),this.getDialog().closeDialog(),[3,4];case 3:return P(t.sent()),[3,4];case 4:return[2]}})})},t.prototype.afterSave=function(t){},t}(i),E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.record=null,t.visible=!1,t.error=null,t}return h(t,e),t.prototype.prepareLoad=function(t){throw new Error("Load not implemented in dialog.")},t.prototype.afterLoad=function(t){},t.prototype.open=function(r){return g(this,void 0,void 0,function(){var e;return m(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.prepareLoad(r)];case 1:return e=t.sent(),this.record=e.data,this.visible=!0,this.afterLoad(this.record),[3,3];case 2:return P(t.sent()),[3,3];case 3:return[2]}})})},t.prototype.prepareDelete=function(t){throw new Error("Delete not implemented in dialog.")},t.prototype.delete=function(){return g(this,void 0,void 0,function(){var e;return m(this,function(t){switch(t.label){case 0:if(!this.record)throw new Error("Unable to delete. Record is null.");t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.prepareDelete(this.record)];case 2:return e=t.sent(),this.record=e.data,this.$emit("deleted",this.record),this.closeDialog(),[3,4];case 3:return P(t.sent()),[3,4];case 4:return[2]}})})},t.prototype.cancel=function(){this.closeDialog()},t.prototype.closeDialog=function(){this.visible=!1},t.prototype.showError=function(t){this.error=t},y([l(),v("design:type",String)],t.prototype,"title",void 0),y([l(),v("design:type",Number)],t.prototype,"width",void 0),t=y([a],t)}(i),R=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e.prototype.created=function(){this.reset()},e.prototype.reset=function(){throw new Error("Reset not implemented in dialog section.")},e.prototype.validate=function(){return!0},e.prototype.load=function(t){},e.prototype.save=function(){return{}},e=y([a],e)}(i);function P(t){console.log(t)}function x(t){return t?e(t).format("YYYY-MM-DD H:mm:ss"):"N/A"}t.Vue=i,t.Component=a,t.CreateDialogComponent=_,t.DeleteDialogComponent=E,t.DetailComponent=w,t.DialogComponent=D,t.DialogSection=R,t.EditDialogComponent=j,t.Emit=function(c){return function(t,i,e){i=function(t){return t.replace(f,"-$1").toLowerCase()}(i);var a=e.value;e.value=function(){for(var e=this,r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];function o(t){void 0!==t&&r.unshift(t),e.$emit.apply(e,[c||i].concat(r))}var n=a.apply(this,r);!function(t){return t instanceof Promise||t&&"function"==typeof t.then}(n)?o(n):n.then(function(t){o(t)})}}},t.HeaderComponent=O,t.Inject=function(r){return c(function(t,e){void 0===t.inject&&(t.inject={}),Array.isArray(t.inject)||(t.inject[e]=r||e)})},t.ListComponent=b,t.Mixins=u,t.Model=function(r,o){return void 0===o&&(o={}),function(t,e){p(o,t,e),c(function(t,e){(t.props||(t.props={}))[e]=o,t.model={prop:e,event:r||e}})(t,e)}},t.Prop=l,t.Provide=function(n){return c(function(t,e){var r=t.provide;if("function"!=typeof r||!r.managed){var o=t.provide;(r=t.provide=function(){var t=Object.create(("function"==typeof o?o.call(this):o)||null);for(var e in r.managed)t[r.managed[e]]=this[e];return t}).managed={}}r.managed[e]=n||e})},t.Watch=function(o,t){void 0===t&&(t={});var e=t.deep,n=void 0!==e&&e,r=t.immediate,i=void 0!==r&&r;return c(function(t,e){"object"!=typeof t.watch&&(t.watch=Object.create(null));var r=t.watch;"object"!=typeof r[o]||Array.isArray(r[o])?void 0===r[o]&&(r[o]=[]):r[o]=[r[o]],r[o].push({handler:e,deep:n,immediate:i})})},t.formatDate=x,t.handleError=P,Object.defineProperty(t,"__esModule",{value:!0})});